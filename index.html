<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ChatAI Bob PRO 2026</title>
<style>
body{font-family:system-ui;margin:0;padding:12px;background:#f5f5f5}
h2{text-align:center}
button,input,textarea{width:100%;max-width:600px;margin:8px auto;display:block;font-size:16px}
button{background:#0d6efd;color:#fff;border:0;padding:12px;border-radius:6px}
#out,#imgOut{background:#fff;padding:10px;border-radius:6px;max-width:600px;margin:auto}
</style>
</head>

<body>

<h2>ğŸ‡²ğŸ‡¦ ChatAI Bob PRO 2026</h2>

<input type="file" id="img">
<button onclick="analyze()">ğŸ–¼ï¸ Analizza foto</button>
<div id="imgOut">ğŸ“· Nessuna immagine analizzata.</div>

<textarea id="txt" placeholder="Scrivi quiâ€¦"></textarea>
<button onclick="send()">ğŸš€ Invia</button>
<div id="out">â³ Pronto.</div>

<script>
const API = "https://groq-proxy-worker.bouabidmoukhlis.workers.dev";

async function send(){
  const t = txt.value.trim();
  if(!t) return;
  out.textContent="â³ Attendi...";
  const r = await fetch(API,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      model:"llama-3.3-70b-versatile",
      messages:[{role:"user",content:t}]
    })
  });
  const j = await r.json();
  out.textContent = j.choices?.[0]?.message?.content || "âŒ Nessuna risposta";
}

async function analyze(){
  if(!img.files[0]){imgOut.textContent="âŒ Nessun file selezionato";return;}
  imgOut.textContent="â³ Analisi...";
  const b64 = await to64(img.files[0]);
  const r = await fetch(API,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      model:"llama-3.2-90b-vision-preview",
      messages:[{
        role:"user",
        content:[
          {type:"text",text:"Descrivi questa immagine"},
          {type:"image_url",image_url:{url:b64}}
        ]
      }]
    })
  });
  const j = await r.json();
  imgOut.textContent = j.choices?.[0]?.message?.content || "âŒ Nessuna risposta";
}

function to64(f){
  return new Promise(r=>{
    const fr=new FileReader();
    fr.onload=()=>r(fr.result);
    fr.readAsDataURL(f);
  });
}
</script>

</body>
</html>
